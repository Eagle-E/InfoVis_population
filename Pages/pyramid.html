<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../Stylesheets/nav.css">
    <link rel="stylesheet" href="../Stylesheets/rangeslider.css">
    <link rel="stylesheet" href="../Stylesheets/pyramide.css" >

    <script src="https://d3js.org/d3.v3.min.js"></script>
    <script src="../Scripts/jquery.csv.js"></script>
    <script src="../Scripts/rangeslider.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="../Scripts/pyramide.js"></script>
</head>

<body onload="changeData()"> 
  <script lang="javascript"> window.addEventListener('resize', changeData); </script>

  <div class="topnav">
    <a href="../Pages/worldmap_population.html">Worldmap</a>
    <a class="active" href="../Pages/pyramid.html">Population Pyramide</a>
    <a href="#p3">R-page</a>
    <a onclick="sendDataToAbout();">About</a>
  </div>

  <div id="div_slider">
    <input type="text" id="slider_year" name="year" value="" />

    <script lang="javascript">
      ionRangeSlider('#slider_year', {
          min: 1950,
          max: 2020,
          prefix: "Year: ",
          grid: true,
          grid_num: 14,
          step: 5,
      });

      var slide = document.getElementById('slider_year');
      slide.onchange = function() {
          changeData();
      }
    </script>
  </div>

  <div class="flex-container">
        <div class="flex-child magenta">
          <div id="pyramide"></div>
        </div>

        <div class="flex-child green">
          
          <div id="div_land">
            <label for="sLand"> <b>Choose a Country:</b></label>
            <br>
            
            <select id="sLand" onchange="changeData();" size="20" value="">
            </select>
        
            <script lang="javascript">
              var select = document.getElementById("sLand");

              var url_string = window.location.href;
              var url = new URL(url_string);

              var lands = url.searchParams.get("lands");
              
              var empty = false
              var options = []

              if(lands == null){
                empty = true
              }

              if(empty){
                options = ["Belgium","France","Germany","Luxembourg","Netherlands","Switzerland","Canada","United States of America"];
              }else{
                options = lands.split(",");
              }      

              for(var i = 0; i < options.length; i++) {
                var opt = options[i];
                var el = document.createElement("option");
                el.textContent = opt;
                el.value = opt;
                select.appendChild(el);
              }
            </script>
          </div>

        </div> 
  </div>

</body>
</html>